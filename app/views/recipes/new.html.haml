#wrapper

	= render :partial => 'layouts/shared/header'

	#content.row{ 'ng-controller' => 'InstantIngredientSearchForNewRecipeController' }	
		#anhadirIng.large-4.columns
			%span.titulo Añada los ingredientes...
			#new_link
				= text_field :link, :number, 'ng-model' => 'numberOfIng', placeholder: 'Cantidad'
				%select{:id => 'link_unit', "ng-model" => "selected_unit", "ng-options" => "u.unit for u in units"}
				= text_field :link, :ingredient, 'ng-model' => 'searchString', placeholder: 'Nombre'
				%select{:id => 'link_importance', "ng-model" => "importanceOfIng", "ng-options" => "i.description for i in importances"}
				%span.btn_addIng.ion-ios7-plus-outline{'ng-click' => 'addLink()'}

			%table{ 'ng-show' => 'searchString.length >= 2', :class => 'resultIngForRecipeTable', 'ng-cloak' => '' }
				%tr{ 'ng-repeat' => 'i in ingredients | searchFor:searchString', 'ng-click' => 'setValue(i)', :class => 'resultIng' }
					%td.resultIng{'ng-bind' => 'i.name'}

			#listaIng
				%ul
					%li{ 'ng-repeat' => 'link in links', :class => 'linkList', 'ng-cloak' => '' }
						%span.remove.ion-ios7-close-empty{ 'ng-click' => 'removeLink($index)' }
						%span{'ng-bind' => 'link.number'}
						%span{'ng-bind' => 'link.unit.description'}
						%span{'ng-bind' => 'link.ing.name'}
						(
						%span{'ng-bind' => 'link.importance.description'}
						)

		%form.nuevaRecetaForm{:name => 'newRecipeForm', :novalidate => '', 'ng-submit' => 'form.submit(newRecipeForm.$valid)'}
			#mainNuevaReceta.large-8.columns
				#nuevaReceta
					#titulo
						= text_field :recipe, :title, placeholder: 'Título', :required => '', 'ng-model' => 'recipeTitle'
					
					#descripcion
						= text_field :recipe, :description, placeholder: 'Descripción', 'ng-model' => 'recipeDescription'

					%input#photoUpload{ :type => 'file', :onchange => 'angular.element(this).scope().readFile()' }

					#detalles.row
						#tiempo.large-4.columns
							= text_field :recipe, :time, placeholder: 'Tiempo', :required => '', :type => 'number', 'ng-model' => 'recipeTime'
						#comensales.large-4.columns
							= text_field :recipe, :servings, placeholder: 'Comensales', :required => '', :type => 'number', 'ng-model' => 'recipeServings'
						#dificultad.large-4.columns
							%select.selector_dif{ placeholder: 'Dificultad',"ng-model" => "recipeDifficulty", :required => '', "ng-options" => "d.description for d in difficulties"}

					#pasos
						#newStep
							%textarea.newStep_description{ placeholder: 'Añada los pasos, uno a uno, con el botón [+]', 'ng-model' => 'textStepRec', 'ng-keyup' => 'enterKeyStep($event)'}
							%span.btn_removeStep.ion-ios7-close-outline{'ng-click' => 'removeStep($index)', 'ng-show' => 'editIndex >= 0'}
							%span.btn_addStep.ion-ios7-plus-outline{'ng-click' => 'addStep()'}
								
						%ul.stepList
							%li{ 'ng-repeat' => 'step in steps', :class => 'stepList', 'ng-cloak' => '' }
								%span.step_description{'ng-bind' => 'step.description', 'ng-class' => "{ 'step_edit': $index == editIndex }", 'ng-click' => 'editStep($index)'}

						

					#crearReceta
						= button_tag 'Crear receta', class: 'btn_crearReceta', type: :submit, 'ng-click' => 'createRecipe()'			



			
	= render :partial => 'layouts/shared/footer'