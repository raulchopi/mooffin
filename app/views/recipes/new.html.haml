%html
%body{ 'ng-app' => 'instantIngredientsSearch' }

= render :partial => 'layouts/shared/header'

#content{ 'ng-controller' => 'InstantIngredientSearchForNewRecipeController' }
	#anhadirIng
		#new_link
			= text_field :link, :number, 'ng-model' => 'numberOfIng'
			= collection_select :link, :unit, Unit.all, :id, :desc, :id => 'link_unit', 'ng-model' => 'unitOfIng', 'ng-change' => 'prueba()'
			= text_field :link, :ingredient, 'ng-model' => 'searchString' 			
			= collection_select :link, :importance, Importance.all, :id, :desc, 'ng-model' => 'importanceOfIng'
			= button_tag '+', class: 'btn_addIng', type: :submit, 'ng-click' => 'addLink()'

		%table{ 'ng-show' => 'searchString.length >= 2', :class => 'resultIngForRecipeTable' }
			%tr{ 'ng-repeat' => 'i in ingredients | searchFor:searchString', 'ng-click' => 'setValue(i)', :class => 'resultIng' }
				%td.resultIng {{i.name}}

		#listaIng
			%ul
				%li{ 'ng-repeat' => 'link in listLinks' }
					%span{ 'ng-click' => 'removeLink($index)' } x
					{{link.0}} 
					{{link.1.desc}}
					{{link.2.name}}
					{{link.3}}
		
	#mainNuevaReceta
		#nuevaReceta
			= form_for @recipe, :html => {:id => 'form_recipe'} do |f|
				= f.label :title, "TÃ­tulo"
				= f.text_field :title
				= f.label :time, "Tiempo"
				= f.text_field :time
				= f.label :servings, "Comensales"
				= f.text_field :servings
				= f.label :difficulty, "Dificultad"
				= f.collection_select :difficulty, Difficulty.all, :id, :desc
				%ul.stepList
					%li{ 'ng-repeat' => 'step in steps' }
						%span.step_description
							{{step.0}}
						%span.step_time
							{{step.1}}					
						%span.remove_step{'ng-click' => 'removeStep($index)'} x
				#newStep
					%textarea.newStep_description{'ng-model' => 'textStepRec'}
					%span.addStep{'ng-click' => 'addStep()'} +

				#crearReceta
					= f.submit 'Crear', :class => 'signup_btn'				


		
= render :partial => 'layouts/shared/footer'